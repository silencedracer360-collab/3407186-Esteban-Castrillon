<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .surface { fill: #16213e; }
      .title { fill: #F0DB4F; font-family: system-ui, sans-serif; font-size: 24px; font-weight: bold; }
      .subtitle { fill: #e94560; font-family: system-ui, sans-serif; font-size: 16px; font-weight: 600; }
      .code { fill: #4ecca3; font-family: monospace; font-size: 12px; }
      .text { fill: #eee; font-family: system-ui, sans-serif; font-size: 12px; }
      .text-muted { fill: #aaa; font-family: system-ui, sans-serif; font-size: 11px; }
      .box { fill: #16213e; stroke: #333; stroke-width: 1; }
      .box-good { fill: #16213e; stroke: #4ecca3; stroke-width: 2; }
      .box-bad { fill: #16213e; stroke: #ff6b6b; stroke-width: 2; }
      .pattern { fill: #e94560; font-family: monospace; font-size: 13px; }
      .result { fill: #4ecca3; font-family: monospace; font-size: 12px; }
      .bad { fill: #ff6b6b; font-family: monospace; font-size: 12px; }
      .good { fill: #4ecca3; font-family: system-ui, sans-serif; font-size: 12px; font-weight: bold; }
      .warn { fill: #ff6b6b; font-family: system-ui, sans-serif; font-size: 12px; font-weight: bold; }
    </style>
  </defs>

  <!-- Background -->
  <rect class="bg" width="800" height="450"/>

  <!-- Title -->
  <text class="title" x="400" y="35" text-anchor="middle">matchAll() vs match()</text>

  <!-- Problem with match() -->
  <text class="subtitle" x="50" y="70">El problema con match() + flag /g</text>

  <rect class="box-bad" x="50" y="85" width="340" height="120" rx="8"/>
  <text class="warn" x="70" y="110">❌ match() con /g</text>
  <text class="code" x="70" y="135">const regex = /(\w+):(\d+)/g;</text>
  <text class="code" x="70" y="155">'a:1, b:2'.match(regex);</text>
  <text class="bad" x="70" y="180">→ ['a:1', 'b:2']</text>
  <text class="text-muted" x="70" y="195">⚠️ PIERDE los grupos de captura</text>

  <rect class="box-good" x="410" y="85" width="340" height="120" rx="8"/>
  <text class="good" x="430" y="110">✅ matchAll()</text>
  <text class="code" x="430" y="135">const regex = /(\w+):(\d+)/g;</text>
  <text class="code" x="430" y="155">[...'a:1, b:2'.matchAll(regex)];</text>
  <text class="result" x="430" y="180">→ [['a:1','a','1'], ['b:2','b','2']]</text>
  <text class="text-muted" x="430" y="195">✓ CONSERVA todos los grupos</text>

  <!-- matchAll returns iterator -->
  <text class="subtitle" x="50" y="240">matchAll() retorna un Iterador</text>

  <rect class="box" x="50" y="255" width="700" height="80" rx="8"/>

  <text class="code" x="70" y="280">const matches = text.matchAll(/pattern/g);</text>

  <text class="text" x="70" y="305">Convertir a array:</text>
  <text class="code" x="180" y="305">[...matches]</text>
  <text class="text-muted" x="280" y="305">spread</text>

  <text class="code" x="350" y="305">Array.from(matches)</text>
  <text class="text-muted" x="490" y="305">Array.from</text>

  <text class="code" x="580" y="305">for (const m of matches)</text>
  <text class="text-muted" x="580" y="320">for...of</text>

  <!-- Each match contains -->
  <text class="subtitle" x="50" y="365">Cada coincidencia contiene</text>

  <rect class="box" x="50" y="380" width="160" height="55" rx="8"/>
  <text class="result" x="70" y="405">match[0]</text>
  <text class="text-muted" x="70" y="425">coincidencia completa</text>

  <rect class="box" x="220" y="380" width="160" height="55" rx="8"/>
  <text class="result" x="240" y="405">match[1], [2]...</text>
  <text class="text-muted" x="240" y="425">grupos de captura</text>

  <rect class="box" x="390" y="380" width="160" height="55" rx="8"/>
  <text class="result" x="410" y="405">match.groups</text>
  <text class="text-muted" x="410" y="425">grupos nombrados</text>

  <rect class="box" x="560" y="380" width="190" height="55" rx="8"/>
  <text class="result" x="580" y="405">match.index</text>
  <text class="text-muted" x="580" y="425">posición en el string</text>
</svg>
