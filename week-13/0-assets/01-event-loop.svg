<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <!-- Dark Background -->
  <rect width="1200" height="800" fill="#0f172a"/>

  <!-- Title -->
  <text x="600" y="50" font-family="system-ui, -apple-system, sans-serif" font-size="32" font-weight="700" fill="#f0db4f" text-anchor="middle">
    JavaScript Event Loop
  </text>

  <!-- Call Stack -->
  <g id="call-stack">
    <rect x="50" y="100" width="300" height="400" fill="#1e293b" stroke="#f0db4f" stroke-width="3" rx="10"/>
    <text x="200" y="135" font-family="system-ui" font-size="24" font-weight="600" fill="#f0db4f" text-anchor="middle">
      Call Stack
    </text>

    <!-- Stack Items -->
    <rect x="80" y="160" width="240" height="60" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="200" y="195" font-family="monospace" font-size="16" fill="#f1f5f9" text-anchor="middle">
      function3()
    </text>

    <rect x="80" y="240" width="240" height="60" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="200" y="275" font-family="monospace" font-size="16" fill="#f1f5f9" text-anchor="middle">
      function2()
    </text>

    <rect x="80" y="320" width="240" height="60" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="200" y="355" font-family="monospace" font-size="16" fill="#f1f5f9" text-anchor="middle">
      function1()
    </text>

    <text x="200" y="450" font-family="system-ui" font-size="14" fill="#94a3b8" text-anchor="middle">
      LIFO (Último en entrar, primero en salir)
    </text>
    <text x="200" y="475" font-family="system-ui" font-size="14" fill="#94a3b8" text-anchor="middle">
      Ejecución síncrona
    </text>
  </g>

  <!-- Web APIs -->
  <g id="web-apis">
    <rect x="450" y="100" width="300" height="200" fill="#1e293b" stroke="#3b82f6" stroke-width="3" rx="10"/>
    <text x="600" y="135" font-family="system-ui" font-size="24" font-weight="600" fill="#3b82f6" text-anchor="middle">
      Web APIs
    </text>

    <!-- API Items -->
    <g transform="translate(470, 160)">
      <text x="0" y="0" font-family="monospace" font-size="14" fill="#f1f5f9">
        • setTimeout()
      </text>
      <text x="0" y="25" font-family="monospace" font-size="14" fill="#f1f5f9">
        • setInterval()
      </text>
      <text x="0" y="50" font-family="monospace" font-size="14" fill="#f1f5f9">
        • fetch()
      </text>
      <text x="0" y="75" font-family="monospace" font-size="14" fill="#f1f5f9">
        • DOM events
      </text>
    </g>
  </g>

  <!-- Callback Queue -->
  <g id="callback-queue">
    <rect x="450" y="350" width="300" height="150" fill="#1e293b" stroke="#22c55e" stroke-width="3" rx="10"/>
    <text x="600" y="385" font-family="system-ui" font-size="24" font-weight="600" fill="#22c55e" text-anchor="middle">
      Callback Queue
    </text>

    <!-- Queue Items -->
    <rect x="470" y="410" width="80" height="50" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="510" y="440" font-family="monospace" font-size="14" fill="#f1f5f9" text-anchor="middle">
      cb1()
    </text>

    <rect x="565" y="410" width="80" height="50" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="605" y="440" font-family="monospace" font-size="14" fill="#f1f5f9" text-anchor="middle">
      cb2()
    </text>

    <rect x="660" y="410" width="80" height="50" fill="#334155" stroke="#64748b" stroke-width="2" rx="5"/>
    <text x="700" y="440" font-family="monospace" font-size="14" fill="#f1f5f9" text-anchor="middle">
      cb3()
    </text>
  </g>

  <!-- Event Loop -->
  <g id="event-loop">
    <circle cx="600" cy="600" r="80" fill="#1e293b" stroke="#f0db4f" stroke-width="4"/>
    <text x="600" y="595" font-family="system-ui" font-size="20" font-weight="600" fill="#f0db4f" text-anchor="middle">
      Event
    </text>
    <text x="600" y="620" font-family="system-ui" font-size="20" font-weight="600" fill="#f0db4f" text-anchor="middle">
      Loop
    </text>
  </g>

  <!-- Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f0db4f"/>
    </marker>
  </defs>

  <!-- Stack to APIs -->
  <path d="M 350 200 L 450 200" stroke="#f0db4f" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="400" y="190" font-family="system-ui" font-size="12" fill="#94a3b8" text-anchor="middle">
    Llamada asíncrona
  </text>

  <!-- APIs to Queue -->
  <path d="M 600 300 L 600 350" stroke="#f0db4f" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="630" y="330" font-family="system-ui" font-size="12" fill="#94a3b8">
    Completado
  </text>

  <!-- Event Loop checking -->
  <path d="M 520 600 L 380 520" stroke="#f0db4f" stroke-width="3" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <text x="430" y="545" font-family="system-ui" font-size="12" fill="#94a3b8">
    Verifica si vacío
  </text>

  <!-- Queue to Stack -->
  <path d="M 520 480 L 380 420" stroke="#f0db4f" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="420" y="440" font-family="system-ui" font-size="12" fill="#94a3b8">
    Mover al stack
  </text>

  <!-- Description -->
  <g id="description">
    <text x="900" y="150" font-family="system-ui" font-size="18" font-weight="600" fill="#f0db4f">
      Flujo de Ejecución:
    </text>

    <g transform="translate(900, 180)">
      <circle cx="0" cy="-5" r="5" fill="#f0db4f"/>
      <text x="15" y="0" font-family="system-ui" font-size="14" fill="#f1f5f9">
        1. El código se ejecuta en el Call Stack
      </text>

      <circle cx="0" cy="25" r="5" fill="#3b82f6"/>
      <text x="15" y="30" font-family="system-ui" font-size="14" fill="#f1f5f9">
        2. Las APIs asíncronas corren en background
      </text>

      <circle cx="0" cy="55" r="5" fill="#22c55e"/>
      <text x="15" y="60" font-family="system-ui" font-size="14" fill="#f1f5f9">
        3. Los callbacks se encolan al terminar
      </text>

      <circle cx="0" cy="85" r="5" fill="#f0db4f"/>
      <text x="15" y="90" font-family="system-ui" font-size="14" fill="#f1f5f9">
        4. El Event Loop verifica el stack
      </text>

      <circle cx="0" cy="115" r="5" fill="#f0db4f"/>
      <text x="15" y="120" font-family="system-ui" font-size="14" fill="#f1f5f9">
        5. Mueve callbacks al stack
      </text>
    </g>

    <!-- Key Point -->
    <rect x="900" y="330" width="280" height="120" fill="#1e293b" stroke="#f59e0b" stroke-width="2" rx="5"/>
    <text x="1040" y="360" font-family="system-ui" font-size="16" font-weight="600" fill="#f59e0b" text-anchor="middle">
      ⚡ Punto Clave
    </text>
    <text x="1040" y="390" font-family="system-ui" font-size="13" fill="#f1f5f9" text-anchor="middle">
      JavaScript es single-threaded pero
    </text>
    <text x="1040" y="415" font-family="system-ui" font-size="13" fill="#f1f5f9" text-anchor="middle">
      puede manejar operaciones asíncronas
    </text>
    <text x="1040" y="440" font-family="system-ui" font-size="13" fill="#f1f5f9" text-anchor="middle">
      ¡gracias al Event Loop!
    </text>
  </g>
</svg>
