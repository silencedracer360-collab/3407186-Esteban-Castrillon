<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <style>
      .bg { fill: #1f2937; }
      .title { fill: #f9fafb; font-family: system-ui, sans-serif; font-size: 24px; font-weight: bold; }
      .subtitle { fill: #9ca3af; font-family: system-ui, sans-serif; font-size: 14px; }
      .label { fill: #f9fafb; font-family: system-ui, sans-serif; font-size: 12px; }
      .box { fill: #374151; stroke: #4b5563; stroke-width: 1; rx: 8; }
      .weak-box { fill: #1e3a5f; stroke: #3b82f6; stroke-width: 2; stroke-dasharray: 5,5; rx: 8; }
      .obj-box { fill: #064e3b; stroke: #10b981; stroke-width: 2; rx: 6; }
      .gc-box { fill: #7f1d1d; stroke: #ef4444; stroke-width: 2; rx: 6; }
      .code { fill: #10b981; font-family: 'Consolas', monospace; font-size: 11px; }
      .method { fill: #a78bfa; font-family: 'Consolas', monospace; font-size: 11px; }
      .arrow { stroke: #f59e0b; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .weak-arrow { stroke: #9ca3af; stroke-width: 1; stroke-dasharray: 4,4; fill: none; marker-end: url(#grayarrow); }
      .strong-arrow { stroke: #10b981; stroke-width: 2; fill: none; marker-end: url(#greenarrow); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon fill="#f59e0b" points="0 0, 10 3.5, 0 7"/>
    </marker>
    <marker id="grayarrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon fill="#9ca3af" points="0 0, 8 3, 0 6"/>
    </marker>
    <marker id="greenarrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon fill="#10b981" points="0 0, 10 3.5, 0 7"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect class="bg" width="800" height="450"/>

  <!-- Title -->
  <text class="title" x="400" y="35" text-anchor="middle">WeakMap y WeakSet</text>
  <text class="subtitle" x="400" y="55" text-anchor="middle">Referencias d√©biles ‚Ä¢ Garbage Collection autom√°tico</text>

  <!-- WeakMap Section -->
  <rect class="box" x="30" y="75" width="360" height="160"/>
  <text class="label" x="210" y="100" text-anchor="middle" font-weight="bold">WeakMap</text>

  <!-- Objects -->
  <rect class="obj-box" x="50" y="115" width="80" height="40"/>
  <text class="label" x="90" y="140" text-anchor="middle">user</text>

  <rect class="obj-box" x="50" y="165" width="80" height="40"/>
  <text class="label" x="90" y="190" text-anchor="middle">element</text>

  <!-- WeakMap box -->
  <rect class="weak-box" x="180" y="110" width="190" height="100"/>
  <text class="label" x="275" y="130" text-anchor="middle" fill="#3b82f6">WeakMap</text>

  <!-- Weak references -->
  <path class="weak-arrow" d="M 135 135 L 195 135"/>
  <text class="code" x="200" y="155">"privateData"</text>

  <path class="weak-arrow" d="M 135 185 L 195 175"/>
  <text class="code" x="200" y="195">"metadata"</text>

  <!-- Methods -->
  <text class="method" x="50" y="225">.set(obj, val) .get(obj) .has(obj) .delete(obj)</text>

  <!-- WeakSet Section -->
  <rect class="box" x="410" y="75" width="360" height="160"/>
  <text class="label" x="590" y="100" text-anchor="middle" font-weight="bold">WeakSet</text>

  <!-- Objects for WeakSet -->
  <rect class="obj-box" x="430" y="115" width="70" height="35"/>
  <text class="label" x="465" y="137" text-anchor="middle">node1</text>

  <rect class="obj-box" x="430" y="160" width="70" height="35"/>
  <text class="label" x="465" y="182" text-anchor="middle">node2</text>

  <!-- WeakSet box -->
  <rect class="weak-box" x="540" y="110" width="210" height="100"/>
  <text class="label" x="645" y="130" text-anchor="middle" fill="#3b82f6">WeakSet (visited)</text>

  <!-- Weak references -->
  <path class="weak-arrow" d="M 505 132 L 555 145"/>
  <text class="label" x="580" y="155">‚úì visited</text>

  <path class="weak-arrow" d="M 505 177 L 555 175"/>
  <text class="label" x="580" y="185">‚úì visited</text>

  <!-- Methods -->
  <text class="method" x="430" y="225">.add(obj) .has(obj) .delete(obj)</text>

  <!-- Garbage Collection Visual -->
  <rect class="box" x="30" y="250" width="740" height="80"/>
  <text class="label" x="400" y="275" text-anchor="middle" font-weight="bold">üóëÔ∏è Garbage Collection</text>

  <!-- Before -->
  <rect class="obj-box" x="60" y="290" width="60" height="30"/>
  <text class="label" x="90" y="310" text-anchor="middle">obj</text>
  <path class="strong-arrow" d="M 125 305 L 165 305"/>
  <rect x="170" y="290" width="80" height="30" fill="#1e3a5f" stroke="#3b82f6" rx="4"/>
  <text class="label" x="210" y="310" text-anchor="middle">WeakMap</text>

  <text class="code" x="280" y="310">obj = null;</text>
  <text class="subtitle" x="280" y="325" font-size="10">‚Üì</text>

  <!-- After -->
  <rect class="gc-box" x="380" y="290" width="60" height="30"/>
  <text class="label" x="410" y="310" text-anchor="middle">null</text>
  <text class="subtitle" x="455" y="310">‚Üí</text>
  <rect x="470" y="290" width="120" height="30" fill="#1e3a5f" stroke="#3b82f6" rx="4"/>
  <text class="label" x="530" y="310" text-anchor="middle">Limpiado ‚úì</text>

  <text class="subtitle" x="650" y="310">Sin memory leak</text>

  <!-- Use Cases -->
  <rect class="box" x="30" y="345" width="235" height="80"/>
  <text class="label" x="147" y="370" text-anchor="middle" font-weight="bold">üìå Casos de Uso</text>
  <text class="subtitle" x="50" y="390" font-size="10">‚Ä¢ Datos privados de clases</text>
  <text class="subtitle" x="50" y="405" font-size="10">‚Ä¢ Cach√© de objetos DOM</text>
  <text class="subtitle" x="50" y="420" font-size="10">‚Ä¢ Marcar objetos visitados</text>

  <!-- Comparison Table -->
  <rect class="box" x="280" y="345" width="490" height="80"/>
  <text class="label" x="525" y="365" text-anchor="middle" font-weight="bold">Map/Set vs WeakMap/WeakSet</text>

  <text class="label" x="300" y="385">Claves:</text>
  <text class="subtitle" x="360" y="385" font-size="10">Cualquier tipo</text>
  <text class="subtitle" x="520" y="385" font-size="10">Solo objetos</text>

  <text class="label" x="300" y="405">Iterable:</text>
  <text class="code" x="360" y="405">‚úì S√≠</text>
  <text class="code" x="520" y="405" fill="#ef4444">‚úó No</text>

  <text class="label" x="300" y="420">GC:</text>
  <text class="subtitle" x="360" y="420" font-size="10">Impide recolecci√≥n</text>
  <text class="subtitle" x="520" y="420" font-size="10">Permite recolecci√≥n</text>

  <!-- Divider -->
  <line x1="480" y1="375" x2="480" y2="425" stroke="#4b5563" stroke-width="1"/>

  <!-- Footer -->
  <text class="subtitle" x="400" y="445" text-anchor="middle">Week 07 - Sets y Maps | JavaScript ES2023</text>
</svg>
