<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <style>
      .bg { fill: #1f2937; }
      .title { fill: #f0db4f; font-family: system-ui, sans-serif; font-size: 24px; font-weight: 600; }
      .subtitle { fill: #94a3b8; font-family: system-ui, sans-serif; font-size: 14px; }
      .box { rx: 8; ry: 8; }
      .subject-box { fill: #374151; stroke: #3b82f6; stroke-width: 2; }
      .observer-box { fill: #374151; stroke: #22c55e; stroke-width: 2; }
      .proxy-box { fill: #374151; stroke: #8b5cf6; stroke-width: 2; }
      .label { fill: #f1f5f9; font-family: system-ui, sans-serif; font-size: 14px; font-weight: 600; }
      .code { fill: #f0db4f; font-family: monospace; font-size: 11px; }
      .text { fill: #94a3b8; font-family: system-ui, sans-serif; font-size: 12px; }
      .arrow { stroke: #64748b; stroke-width: 2; fill: none; }
      .notify-arrow { stroke: #22c55e; stroke-width: 2; fill: none; stroke-dasharray: 5,3; }
      .arrow-head { fill: #64748b; }
      .notify-head { fill: #22c55e; }
    </style>
  </defs>

  <!-- Background -->
  <rect class="bg" width="800" height="500"/>

  <!-- Title -->
  <text class="title" x="400" y="40" text-anchor="middle">ğŸ‘ï¸ Observer Pattern con Proxy</text>
  <text class="subtitle" x="400" y="65" text-anchor="middle">NotificaciÃ³n automÃ¡tica de cambios a suscriptores</text>

  <!-- Subject (Observable) -->
  <rect class="box subject-box" x="280" y="90" width="240" height="120"/>
  <text class="label" x="400" y="115" text-anchor="middle">ğŸ“¦ Subject (Observable)</text>
  <rect class="box" x="300" y="130" width="200" height="65" fill="#1f2937" stroke="#475569"/>
  <text class="code" x="400" y="152" text-anchor="middle">const state = observable({</text>
  <text class="code" x="400" y="168" text-anchor="middle">  count: 0,</text>
  <text class="code" x="400" y="184" text-anchor="middle">  theme: 'dark'</text>

  <!-- Proxy Layer -->
  <rect class="box proxy-box" x="280" y="220" width="240" height="50"/>
  <text class="label" x="400" y="250" text-anchor="middle">ğŸ­ Proxy (intercepta set)</text>

  <!-- Arrows from Subject to Proxy -->
  <path class="arrow" d="M400 210 L400 220" marker-end="url(#arrow)"/>

  <!-- Listeners Store -->
  <rect class="box" x="560" y="130" width="180" height="80" fill="#374151" stroke="#f0db4f" stroke-width="2"/>
  <text class="label" x="650" y="155" text-anchor="middle" font-size="12">ğŸ“‹ Listeners</text>
  <text class="code" x="650" y="175" text-anchor="middle">Set&lt;Function&gt;</text>
  <text class="text" x="650" y="195" text-anchor="middle">Callbacks registrados</text>

  <!-- Arrow from Subject to Listeners -->
  <path class="arrow" d="M520 150 L560 150" marker-end="url(#arrow)"/>

  <!-- Observers -->
  <rect class="box observer-box" x="60" y="310" width="160" height="80"/>
  <text class="label" x="140" y="340" text-anchor="middle">ğŸ‘ï¸ Observer 1</text>
  <text class="code" x="140" y="365" text-anchor="middle">updateUI()</text>

  <rect class="box observer-box" x="250" y="310" width="160" height="80"/>
  <text class="label" x="330" y="340" text-anchor="middle">ğŸ‘ï¸ Observer 2</text>
  <text class="code" x="330" y="365" text-anchor="middle">saveToStorage()</text>

  <rect class="box observer-box" x="440" y="310" width="160" height="80"/>
  <text class="label" x="520" y="340" text-anchor="middle">ğŸ‘ï¸ Observer 3</text>
  <text class="code" x="520" y="365" text-anchor="middle">logChanges()</text>

  <!-- Notification arrows -->
  <path class="notify-arrow" d="M340 270 L140 310" marker-end="url(#notify)"/>
  <path class="notify-arrow" d="M400 270 L330 310" marker-end="url(#notify)"/>
  <path class="notify-arrow" d="M460 270 L520 310" marker-end="url(#notify)"/>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon class="arrow-head" points="0 0, 10 3.5, 0 7"/>
    </marker>
    <marker id="notify" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon class="notify-head" points="0 0, 10 3.5, 0 7"/>
    </marker>
  </defs>

  <!-- Notification label -->
  <text class="text" x="280" y="295" fill="#22c55e">notify(prop, value)</text>

  <!-- Code Example -->
  <rect class="box" x="60" y="410" width="330" height="70" fill="#374151" stroke="#475569" stroke-width="2"/>
  <text class="label" x="225" y="432" text-anchor="middle" font-size="12">SuscripciÃ³n</text>
  <text class="code" x="80" y="452">state.subscribe((p, v) =&gt; {</text>
  <text class="code" x="90" y="468">  console.log(`${p} â†’ ${v}`);</text>

  <!-- Trigger Example -->
  <rect class="box" x="410" y="410" width="330" height="70" fill="#374151" stroke="#22c55e" stroke-width="2"/>
  <text class="label" x="575" y="432" text-anchor="middle" font-size="12">Disparo automÃ¡tico</text>
  <text class="code" x="430" y="452">state.count = 1;</text>
  <text class="code" x="430" y="468">// â†’ Notifica a todos</text>

  <!-- Footer -->
  <text class="subtitle" x="400" y="495" text-anchor="middle">Week 10 | Bootcamp JavaScript ES2023</text>
</svg>
